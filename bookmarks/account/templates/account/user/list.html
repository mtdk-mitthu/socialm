{% extends "base.html" %}
{% load thumbnail %}

{% block title %}People{% endblock %}

{% block content %}
  <h1>People</h1>
  <div id="people-list">
    {% for user in users %}
      <div class="user">
        <a href="{{ user.get_absolute_url }}">
          {# Check if user has a profile photo #}
          {% if user.profile.photo %}
            {# Generate the thumbnail variable 'im' #}
            {% thumbnail user.profile.photo 180x180 crop="100%" as im %}
              <img src="{{ im.url }}" alt="{{ user.username }}">
          {% else %}
            {# Fallback if no photo exists #}
            <img src="#" alt="No Photo"> 
          {% endif %}
        </a>
        
        <div class="info">
          <a href="{{ user.get_absolute_url }}" class="title">
            {% if user.get_full_name %}
              {{ user.get_full_name }}
            {% else %}
              {{ user.username }}
            {% endif %}
          </a>
        </div>
      </div>
    {% endfor %}
  </div>
{% endblock %}